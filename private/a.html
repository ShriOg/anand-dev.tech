<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="robots" content="noindex, nofollow">
  <title>Private Space</title>
  
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/lock-screen.css">
  <link rel="stylesheet" href="css/chat.css">
  <link rel="stylesheet" href="css/notes.css">
  <link rel="stylesheet" href="css/images.css">
  <link rel="stylesheet" href="css/log.css">
  <link rel="stylesheet" href="css/memory.css">
  <link rel="stylesheet" href="css/projects.css">
  <link rel="stylesheet" href="css/settings.css">
  <link rel="stylesheet" href="css/focus-mode.css">
  <link rel="stylesheet" href="css/mobile.css">
  <link rel="stylesheet" href="css/admin.css">
  <link rel="stylesheet" href="css/motion.css">
  <link rel="stylesheet" href="css/rituals.css">
</head>
<body>
  <!-- Lock Screen -->
  <div class="ps-lock-screen active" id="lockScreen">
    <div class="ps-lock-content">
      <div class="ps-lock-logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          <circle cx="12" cy="16" r="1"/>
        </svg>
      </div>
      <h1 class="ps-lock-title">Private Space</h1>
      <p class="ps-lock-subtitle">Enter password to unlock</p>
      
      <div class="ps-lock-form">
        <div class="ps-lock-input-wrapper">
          <input type="password" 
                 class="ps-lock-input" 
                 id="passwordInput" 
                 placeholder="Password"
                 autocomplete="off"
                 autofocus>
          <button type="button" class="ps-show-password" id="showPasswordBtn" onclick="togglePasswordVisibility()">
            <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <svg class="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
              <line x1="1" y1="1" x2="23" y2="23"/>
            </svg>
          </button>
        </div>
        <button class="ps-lock-btn" id="unlockBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </button>
      </div>
      
      <script>
        function togglePasswordVisibility() {
          const input = document.getElementById('passwordInput');
          const btn = document.getElementById('showPasswordBtn');
          const eyeOpen = btn.querySelector('.eye-open');
          const eyeClosed = btn.querySelector('.eye-closed');
          
          if (input.type === 'password') {
            input.type = 'text';
            eyeOpen.style.display = 'none';
            eyeClosed.style.display = 'block';
          } else {
            input.type = 'password';
            eyeOpen.style.display = 'block';
            eyeClosed.style.display = 'none';
          }
        }
      </script>
      
      <div class="ps-lock-error" id="lockError"></div>
      
      <div class="ps-lock-hint">
        <span>All data encrypted locally</span>
      </div>
    </div>
  </div>

  <!-- Main Application -->
  <div class="ps-app" id="mainApp">
    <!-- Sidebar -->
    <aside class="ps-sidebar" id="sidebar">
      <div class="ps-sidebar-header">
        <div class="ps-logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5"/>
            <path d="M2 12l10 5 10-5"/>
          </svg>
          <span class="ps-logo-text">Private</span>
        </div>
        <button class="ps-sidebar-toggle" id="sidebarToggle" onclick="PSUI.toggleSidebar()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
        </button>
      </div>

      <nav class="ps-nav">
        <div class="ps-nav-section">
          <span class="ps-nav-section-label">Personal</span>
        </div>
        
        <button class="ps-nav-item active" data-section="chat" onclick="PSUI.navigateTo('chat')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <span class="ps-nav-label">Her Mode</span>
        </button>
        
        <button class="ps-nav-item" data-section="pro-chat" onclick="PSUI.navigateTo('pro-chat')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
            <line x1="8" y1="21" x2="16" y2="21"/>
            <line x1="12" y1="17" x2="12" y2="21"/>
          </svg>
          <span class="ps-nav-label">Pro Mode</span>
        </button>
        
        <button class="ps-nav-item" data-section="notes" onclick="PSUI.navigateTo('notes')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
          </svg>
          <span class="ps-nav-label">Notes</span>
        </button>
        
        <button class="ps-nav-item" data-section="images" onclick="PSUI.navigateTo('images')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <polyline points="21 15 16 10 5 21"/>
          </svg>
          <span class="ps-nav-label">Images</span>
        </button>
        
        <button class="ps-nav-item" data-section="log" onclick="PSUI.navigateTo('log')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span class="ps-nav-label">Log</span>
        </button>
        
        <div class="ps-nav-section ps-nav-section-rituals">
          <span class="ps-nav-section-label">Rituals</span>
        </div>
        
        <button class="ps-nav-item" data-section="journal" onclick="PSUI.navigateTo('journal')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 20h9"/>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
          </svg>
          <span class="ps-nav-label">Daily Entry</span>
        </button>
        
        <button class="ps-nav-item" data-section="mood" onclick="PSUI.navigateTo('mood')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
            <line x1="9" y1="9" x2="9.01" y2="9"/>
            <line x1="15" y1="9" x2="15.01" y2="9"/>
          </svg>
          <span class="ps-nav-label">Mood</span>
        </button>
        
        <button class="ps-nav-item" data-section="memory" onclick="PSUI.navigateTo('memory')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span class="ps-nav-label">Memory</span>
        </button>
        
        <div class="ps-nav-section">
          <span class="ps-nav-section-label">Website Control</span>
        </div>
        
        <button class="ps-nav-item" data-section="projects" onclick="PSUI.navigateTo('projects')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
            <line x1="12" y1="22.08" x2="12" y2="12"/>
          </svg>
          <span class="ps-nav-label">Projects</span>
        </button>
        
        <button class="ps-nav-item" data-section="navigation" onclick="PSUI.navigateTo('navigation')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"/>
            <line x1="3" y1="6" x2="21" y2="6"/>
            <line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
          <span class="ps-nav-label">Navigation</span>
        </button>
        
        <button class="ps-nav-item" data-section="pages" onclick="PSUI.navigateTo('pages')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
          </svg>
          <span class="ps-nav-label">Pages</span>
        </button>
        
        <button class="ps-nav-item" data-section="site-settings" onclick="PSUI.navigateTo('site-settings')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="2" y1="12" x2="22" y2="12"/>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          <span class="ps-nav-label">Site Settings</span>
        </button>
      </nav>

      <div class="ps-sidebar-footer">
        <button class="ps-nav-item" data-section="settings" onclick="PSUI.navigateTo('settings')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          <span class="ps-nav-label">Settings</span>
        </button>
        
        <button class="ps-nav-item ps-nav-lock" onclick="PSAuth.lock()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <span class="ps-nav-label">Lock</span>
        </button>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="ps-main">
      <!-- Section: Her Mode Chat -->
      <section class="ps-section active" id="section-chat">
        <div class="ps-section-header">
          <h2 class="ps-section-title">
            <span class="ps-title-icon">üíï</span>
            Her Mode
          </h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-ghost" onclick="AISystem.openTrainingModal()" title="Training Data">
              <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
            </button>
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="AISystem.startNewSession('her')">
              <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              New
            </button>
          </div>
        </div>
        <div class="ps-workspace ps-chat-workspace" id="her-chat-workspace">
          <div class="ps-chat-layout">
            <!-- Sessions Sidebar -->
            <aside class="ps-chat-sidebar" id="herChatSidebar">
              <div class="ps-chat-sidebar-header">
                <span class="ps-chat-sidebar-title">Conversations</span>
              </div>
              <div class="ps-chat-sessions-list" id="herSessionsList">
                <!-- Sessions loaded dynamically -->
              </div>
            </aside>
            <!-- Chat Area -->
            <div class="ps-chat-container">
              <div class="ps-chat-messages" id="herChatMessages"></div>
              <div class="ps-chat-input-container">
                <div class="ps-chat-input-wrapper">
                  <textarea class="ps-chat-input" id="herChatInput" placeholder="Kuch baat karo... üí≠" rows="1"></textarea>
                  <button class="ps-chat-send" id="herSendBtn">
                    <svg viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Pro Mode Chat -->
      <section class="ps-section" id="section-pro-chat">
        <div class="ps-section-header">
          <h2 class="ps-section-title">
            <span class="ps-title-icon">‚ö°</span>
            Professional Mode
          </h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="AISystem.startNewSession('pro')">
              <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              New
            </button>
          </div>
        </div>
        <div class="ps-workspace ps-chat-workspace" id="pro-chat-workspace">
          <div class="ps-chat-layout">
            <!-- Sessions Sidebar -->
            <aside class="ps-chat-sidebar" id="proChatSidebar">
              <div class="ps-chat-sidebar-header">
                <span class="ps-chat-sidebar-title">Conversations</span>
              </div>
              <div class="ps-chat-sessions-list" id="proSessionsList">
                <!-- Sessions loaded dynamically -->
              </div>
            </aside>
            <!-- Chat Area -->
            <div class="ps-chat-container">
              <div class="ps-chat-messages" id="proChatMessages"></div>
              <div class="ps-chat-input-container">
                <div class="ps-chat-input-wrapper">
                  <textarea class="ps-chat-input" id="proChatInput" placeholder="Ask anything..." rows="1"></textarea>
                  <button class="ps-chat-send" id="proSendBtn">
                    <svg viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Notes -->
      <section class="ps-section" id="section-notes">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Notes</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSNotes.create()">
              <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              New Note
            </button>
          </div>
        </div>
        <div class="ps-workspace">
          <!-- Notes content loaded by PSNotes.load() -->
        </div>
      </section>

      <!-- Section: Images -->
      <section class="ps-section" id="section-images">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Images</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSImages.upload()">
              <svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
              Upload
            </button>
          </div>
        </div>
        <div class="ps-workspace">
          <!-- Images content loaded by PSImages.load() -->
        </div>
      </section>

      <!-- Section: Daily Log -->
      <section class="ps-section" id="section-log">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Daily Log</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSLog.selectDate(new Date().getFullYear(), new Date().getMonth(), new Date().getDate())">
              Today
            </button>
          </div>
        </div>
        <div class="ps-workspace">
          <!-- Log content loaded by PSLog.load() -->
        </div>
      </section>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           PERSONAL RITUALS SECTIONS
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

      <!-- Section: Daily Entry (Journal) -->
      <section class="ps-section" id="section-journal">
        <div class="ps-ritual-quiet-header">
          <h2 class="ps-ritual-title">Daily Entry</h2>
          <span class="ps-ritual-hint">Write freely. No pressure.</span>
        </div>
        <div class="ps-workspace ps-journal-workspace">
          <div class="ps-journal-container">
            <div class="ps-journal-date">
              <div class="ps-journal-date-nav">
                <button onclick="PSJournal.previousDay()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                </button>
                <button onclick="PSJournal.nextDay()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
                </button>
              </div>
              <span class="ps-journal-date-display" id="journalDateDisplay"></span>
              <button class="ps-journal-date-today" onclick="PSJournal.goToToday()">Today</button>
            </div>
            <div class="ps-journal-editor">
              <textarea 
                class="ps-journal-textarea" 
                id="journalTextarea" 
                placeholder="What's on your mind today..."
                oninput="PSJournal.handleInput()"
              ></textarea>
              <div class="ps-journal-status" id="journalStatus">
                <span></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Mood -->
      <section class="ps-section" id="section-mood">
        <div class="ps-ritual-quiet-header">
          <h2 class="ps-ritual-title">How are you feeling?</h2>
          <span class="ps-ritual-hint">Optional. Private. No analytics.</span>
        </div>
        <div class="ps-workspace ps-mood-workspace">
          <div class="ps-mood-container">
            <div class="ps-mood-today" id="moodToday" style="display: none;">
              <span class="ps-mood-today-icon" id="moodTodayIcon"></span>
              <span>Today's mood</span>
            </div>
            
            <div class="ps-mood-selector" id="moodSelector">
              <button class="ps-mood-option" data-mood="peaceful" title="Peaceful">üòå</button>
              <button class="ps-mood-option" data-mood="happy" title="Happy">üòä</button>
              <button class="ps-mood-option" data-mood="neutral" title="Neutral">üòê</button>
              <button class="ps-mood-option" data-mood="tired" title="Tired">üòî</button>
              <button class="ps-mood-option" data-mood="stressed" title="Stressed">üò∞</button>
            </div>
            
            <div class="ps-mood-note">
              <input 
                type="text" 
                class="ps-mood-note-input" 
                id="moodNoteInput" 
                placeholder="Add a note (optional)"
                onkeydown="if(event.key==='Enter') PSMood.saveNote()"
              >
            </div>
            
            <div class="ps-mood-history" id="moodHistory">
              <div class="ps-mood-history-title">Recent</div>
              <div class="ps-mood-history-list" id="moodHistoryList">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Memory (Intentional) -->
      <section class="ps-section" id="section-memory">
        <div class="ps-ritual-quiet-header">
          <h2 class="ps-ritual-title">Memory</h2>
          <span class="ps-ritual-hint">Save what matters. Intentionally.</span>
        </div>
        <div class="ps-workspace ps-memory-workspace">
          <div class="ps-memory-intro">
            <p class="ps-memory-intro-text">
              These memories are yours. Save thoughts, feelings, moments, or preferences.<br>
              AI can read these to understand you better, but will always ask before saving.
            </p>
          </div>
          
          <div class="ps-memory-add">
            <div class="ps-memory-type-selector" id="memoryTypeSelector">
              <button class="ps-memory-type-btn active" data-type="thought">üí≠ Thought</button>
              <button class="ps-memory-type-btn" data-type="feeling">üíï Feeling</button>
              <button class="ps-memory-type-btn" data-type="moment">‚ú® Moment</button>
              <button class="ps-memory-type-btn" data-type="preference">‚öôÔ∏è Preference</button>
            </div>
            <div class="ps-memory-input-group">
              <textarea 
                class="ps-memory-input" 
                id="memoryInput" 
                rows="3"
                placeholder="What would you like to remember?"
              ></textarea>
            </div>
            <div class="ps-memory-actions">
              <button class="ps-btn ps-btn-sm ps-btn-primary" onclick="PSMemoryRituals.save()">
                Save Memory
              </button>
            </div>
          </div>
          
          <div class="ps-memory-list" id="memoryList">
            <!-- Memories loaded dynamically -->
          </div>
        </div>
      </section>

      <!-- Section: Projects Manager -->
      <section class="ps-section" id="section-projects">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Projects Manager</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="ProjectsManager.syncToPublicSite()">
              <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
              Sync
            </button>
            <button class="ps-btn ps-btn-sm ps-btn-primary" onclick="ProjectsManager.openEditor()">
              <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              New Project
            </button>
          </div>
        </div>
        <div class="ps-workspace" id="projects-workspace">
          <div class="ps-control-panel">
            <div class="ps-projects-filters">
              <div class="ps-projects-search">
                <input type="text" class="ps-input ps-input-sm" id="projects-search" placeholder="Search projects..." oninput="ProjectsManager.filterProjects(this.value)">
              </div>
              <select class="ps-select ps-select-sm" id="projects-filter-status" onchange="ProjectsManager.filterByStatus(this.value)">
                <option value="all">All Status</option>
                <option value="published">Published</option>
                <option value="draft">Draft</option>
                <option value="hidden">Hidden</option>
              </select>
            </div>
            <div class="ps-projects-list" id="projectsList">
              <!-- Projects loaded dynamically -->
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Navigation Manager -->
      <section class="ps-section" id="section-navigation">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Navigation Manager</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="NavigationManager.syncToPublicSite()">
              <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
              Sync
            </button>
            <button class="ps-btn ps-btn-sm ps-btn-primary" onclick="NavigationManager.openEditor()">
              <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              Add Link
            </button>
          </div>
        </div>
        <div class="ps-workspace" id="navigation-workspace">
          <div class="ps-control-panel">
            <div class="ps-nav-links-list" id="navLinksList">
              <!-- Navigation links loaded dynamically -->
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Pages Manager -->
      <section class="ps-section" id="section-pages">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Pages Manager</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PagesManager.syncToPublicSite()">
              <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
              Sync
            </button>
            <button class="ps-btn ps-btn-sm ps-btn-primary" onclick="PagesManager.openEditor()">
              <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              Add Page
            </button>
          </div>
        </div>
        <div class="ps-workspace" id="pages-workspace">
          <div class="ps-control-panel">
            <!-- Public Pages -->
            <div class="ps-pages-section">
              <div class="ps-pages-section-header">
                <h3 class="ps-pages-section-title">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                  Public Pages
                </h3>
                <span class="ps-pages-count public">0</span>
              </div>
              <div class="ps-pages-list" id="publicPagesList"></div>
            </div>
            
            <!-- Hidden Pages -->
            <div class="ps-pages-section">
              <div class="ps-pages-section-header">
                <h3 class="ps-pages-section-title">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                  Hidden Pages
                </h3>
                <span class="ps-pages-count hidden">0</span>
              </div>
              <div class="ps-pages-list" id="hiddenPagesList"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Site Settings -->
      <section class="ps-section" id="section-site-settings">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Site Settings</h2>
          <div class="ps-section-actions">
            <button class="ps-btn ps-btn-sm ps-btn-primary" onclick="SettingsManager.collectAndSave()">
              Save Changes
            </button>
          </div>
        </div>
        <div class="ps-workspace" id="site-settings-workspace">
          <div class="ps-settings-panel">
            <!-- Identity -->
            <div class="ps-settings-section">
              <h3 class="ps-settings-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                Site Identity
              </h3>
              <div class="ps-settings-grid">
                <div class="ps-settings-field">
                  <label class="ps-label">Site Name</label>
                  <input type="text" class="ps-input" id="settings-site-name" placeholder="Your Site Name">
                </div>
                <div class="ps-settings-field">
                  <label class="ps-label">Site Tagline</label>
                  <input type="text" class="ps-input" id="settings-site-tagline" placeholder="Short description">
                </div>
                <div class="ps-settings-field ps-settings-field-full">
                  <label class="ps-label">Author Bio</label>
                  <textarea class="ps-textarea" id="settings-author-bio" rows="3" placeholder="About you..."></textarea>
                </div>
              </div>
            </div>

            <!-- Social Links -->
            <div class="ps-settings-section">
              <h3 class="ps-settings-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                Social Links
              </h3>
              <div class="ps-settings-grid">
                <div class="ps-settings-field">
                  <label class="ps-label">GitHub</label>
                  <input type="url" class="ps-input" id="settings-github" placeholder="https://github.com/username">
                </div>
                <div class="ps-settings-field">
                  <label class="ps-label">LinkedIn</label>
                  <input type="url" class="ps-input" id="settings-linkedin" placeholder="https://linkedin.com/in/username">
                </div>
                <div class="ps-settings-field">
                  <label class="ps-label">Twitter/X</label>
                  <input type="url" class="ps-input" id="settings-twitter" placeholder="https://x.com/username">
                </div>
                <div class="ps-settings-field">
                  <label class="ps-label">Email</label>
                  <input type="email" class="ps-input" id="settings-email" placeholder="you@example.com">
                </div>
              </div>
            </div>

            <!-- Appearance -->
            <div class="ps-settings-section">
              <h3 class="ps-settings-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                Appearance
              </h3>
              <div class="ps-settings-grid">
                <div class="ps-settings-field">
                  <label class="ps-label">Accent Color</label>
                  <input type="color" class="ps-color-input" id="settings-accent-color" value="#6366f1">
                </div>
                <div class="ps-settings-field">
                  <label class="ps-label">Theme Mode</label>
                  <select class="ps-select" id="settings-theme-mode">
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                    <option value="system">System</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- SEO -->
            <div class="ps-settings-section">
              <h3 class="ps-settings-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                SEO & Meta
              </h3>
              <div class="ps-settings-grid">
                <div class="ps-settings-field ps-settings-field-full">
                  <label class="ps-label">Meta Description</label>
                  <textarea class="ps-textarea" id="settings-meta-description" rows="2" placeholder="Site description for search engines..."></textarea>
                </div>
                <div class="ps-settings-field ps-settings-field-full">
                  <label class="ps-label">Keywords</label>
                  <input type="text" class="ps-input" id="settings-keywords" placeholder="keyword1, keyword2, keyword3">
                </div>
              </div>
            </div>

            <!-- Maintenance -->
            <div class="ps-settings-section">
              <h3 class="ps-settings-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                Maintenance
              </h3>
              <div class="ps-settings-grid">
                <div class="ps-settings-field">
                  <label class="ps-toggle">
                    <input type="checkbox" class="ps-toggle-input" id="settings-maintenance-mode">
                    <span class="ps-toggle-track"></span>
                    <span class="ps-toggle-label">Maintenance Mode</span>
                  </label>
                  <p class="ps-text-muted ps-text-sm">When enabled, visitors see a maintenance page.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Settings (Personal Space) -->
      <section class="ps-section" id="section-settings">
        <div class="ps-section-header">
          <h2 class="ps-section-title">Private Space Settings</h2>
        </div>
        <div class="ps-workspace">
          <!-- Settings content loaded by PSSettings.load() -->
        </div>
      </section>
    </main>

    <!-- AI Panel (Collapsible Right Panel) -->
    <aside class="ps-ai-panel" id="aiPanel">
      <div class="ps-ai-panel-header">
        <h3 class="ps-ai-panel-title">AI Assistant</h3>
        <button class="ps-ai-panel-close" onclick="PSUI.toggleAI()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="ps-ai-panel-content" id="aiPanelContent">
        <div class="ps-ai-panel-empty">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 8v4l3 3"/>
          </svg>
          <p>AI context will appear here based on your current activity.</p>
        </div>
      </div>
    </aside>

    <!-- Mobile Bottom Navigation -->
    <nav class="ps-mobile-nav" id="mobileNav">
      <button class="ps-mobile-nav-item active" data-section="chat" onclick="PSUI.navigateTo('chat')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
        <span>Her</span>
      </button>
      <button class="ps-mobile-nav-item" data-section="pro-chat" onclick="PSUI.navigateTo('pro-chat')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
          <line x1="8" y1="21" x2="16" y2="21"/>
          <line x1="12" y1="17" x2="12" y2="21"/>
        </svg>
        <span>Pro</span>
      </button>
      <button class="ps-mobile-nav-item" data-section="projects" onclick="PSUI.navigateTo('projects')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
        </svg>
        <span>Projects</span>
      </button>
      <button class="ps-mobile-nav-item" data-section="pages" onclick="PSUI.navigateTo('pages')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
        </svg>
        <span>Pages</span>
      </button>
      <button class="ps-mobile-nav-item ps-mobile-nav-more" onclick="PSUI.showMobileMenu()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="1"/>
          <circle cx="12" cy="5" r="1"/>
          <circle cx="12" cy="19" r="1"/>
        </svg>
        <span>More</span>
      </button>
    </nav>
  </div>

  <!-- Toast Container -->
  <div class="ps-toast-container" id="toastContainer"></div>

  <!-- Modal Container -->
  <div class="ps-modal-overlay" id="modalOverlay" onclick="PSUI.hideModal()">
    <div class="ps-modal" onclick="event.stopPropagation()">
      <div class="ps-modal-header" id="modalHeader"></div>
      <div class="ps-modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- Project Editor Modal -->
  <div class="ps-modal-overlay" id="projectEditorOverlay" onclick="ProjectsManager?.closeEditor()">
    <div class="ps-modal ps-modal-lg" onclick="event.stopPropagation()">
      <div class="ps-modal-header">
        <h3 id="projectEditorTitle">Edit Project</h3>
        <button class="ps-modal-close" onclick="ProjectsManager?.closeEditor()">
          <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="ps-modal-body" id="projectEditorBody">
        <!-- Editor form loaded dynamically -->
      </div>
    </div>
  </div>

  <!-- AI Training Modal -->
  <div class="ps-modal-overlay" id="trainingModalOverlay" onclick="PSAISystem?.closeTrainingModal()">
    <div class="ps-modal ps-modal-lg" onclick="event.stopPropagation()">
      <div class="ps-modal-header">
        <h3>Her Mode Training Data</h3>
        <button class="ps-modal-close" onclick="PSAISystem?.closeTrainingModal()">
          <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="ps-modal-body">
        <p class="ps-text-muted ps-text-sm" style="margin-bottom: var(--ps-space-4);">
          Add training examples to customize how She responds. These are stored locally and used to shape the AI's personality.
        </p>
        <div class="ps-training-form" style="display: flex; flex-direction: column; gap: var(--ps-space-4);">
          <div class="ps-settings-field">
            <label class="ps-label">Your Input</label>
            <textarea class="ps-textarea" id="training-input" rows="2" placeholder="What you might say..."></textarea>
          </div>
          <div class="ps-settings-field">
            <label class="ps-label">Her Response</label>
            <textarea class="ps-textarea" id="training-output" rows="3" placeholder="How She should respond..."></textarea>
          </div>
          <button class="ps-btn ps-btn-primary" onclick="PSAISystem?.addTrainingData()">
            <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Add Training Example
          </button>
        </div>
        <div class="ps-training-list" id="training-data-list" style="margin-top: var(--ps-space-6);">
          <!-- Training examples loaded dynamically -->
        </div>
      </div>
    </div>
  </div>

  <!-- AI Assist Modal -->
  <div class="ps-modal-overlay" id="aiAssistOverlay" onclick="PSAIAssist?.close()">
    <div class="ps-modal ps-modal-xl" onclick="event.stopPropagation()">
      <div class="ps-modal-header">
        <h3>AI Content Assistant</h3>
        <button class="ps-modal-close" onclick="PSAIAssist?.close()">
          <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="ps-modal-body">
        <div class="ps-ai-assist-content">
          <div class="ps-ai-assist-options">
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSAIAssist?.enhance('rewrite')">Rewrite</button>
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSAIAssist?.enhance('improve')">Improve</button>
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSAIAssist?.enhance('bullets')">To Bullets</button>
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSAIAssist?.enhance('summarize')">Summarize</button>
            <button class="ps-btn ps-btn-sm ps-btn-secondary" onclick="PSAIAssist?.enhance('expand')">Expand</button>
          </div>
          <div class="ps-ai-assist-compare">
            <div class="ps-ai-assist-panel">
              <span class="ps-ai-assist-panel-label">Original</span>
              <textarea class="ps-textarea" id="ai-assist-original" rows="10" readonly></textarea>
            </div>
            <div class="ps-ai-assist-panel">
              <span class="ps-ai-assist-panel-label">Enhanced</span>
              <textarea class="ps-textarea" id="ai-assist-enhanced" rows="10" placeholder="AI-enhanced content will appear here..."></textarea>
            </div>
          </div>
          <div class="ps-ai-assist-actions">
            <button class="ps-btn ps-btn-secondary" onclick="PSAIAssist?.close()">Cancel</button>
            <button class="ps-btn ps-btn-primary" onclick="PSAIAssist?.apply()">Apply Changes</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/crypto.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/memory.js"></script>
  <script src="js/chat.js"></script>
  <script src="js/notes.js"></script>
  <script src="js/images.js"></script>
  <script src="js/log.js"></script>
  <script src="js/projects.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/sync.js"></script>
  <!-- New Master Control Center Modules -->
  <script src="js/toast.js"></script>
  <script src="js/database.js"></script>
  <script src="js/ai-system.js"></script>
  <script src="js/ai-assist.js"></script>
  <script src="js/projects-manager.js"></script>
  <script src="js/navigation-manager.js"></script>
  <script src="js/pages-manager.js"></script>
  <script src="js/settings-manager.js"></script>
  <script src="js/rituals.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
