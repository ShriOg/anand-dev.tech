<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="robots" content="noindex, nofollow">
  <title>Personal Space - Her Mode</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="css/personal.css">
</head>
<body>
  <!-- Auth Check Overlay -->
  <div class="auth-check" id="authCheck">
    <div class="auth-check-content">
      <div class="auth-spinner"></div>
      <p>Verifying session...</p>
    </div>
  </div>

  <!-- Ambient Background -->
  <div class="her-ambient">
    <div class="her-ambient-orb orb-1"></div>
    <div class="her-ambient-orb orb-2"></div>
    <div class="her-ambient-orb orb-3"></div>
  </div>

  <!-- Main App -->
  <div class="her-app" id="herApp">
    <!-- Sidebar -->
    <aside class="her-sidebar" id="sidebar">
      <div class="her-sidebar-header">
        <a href="index.html" class="her-logo">
          <span class="her-logo-icon">üíñ</span>
          <span class="her-logo-text">Her Space</span>
        </a>
        <button class="her-sidebar-toggle" id="sidebarToggle">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
        </button>
      </div>

      <nav class="her-nav">
        <div class="her-nav-section">
          <span class="her-nav-label">Connect</span>
        </div>
        
        <button class="her-nav-item active" data-section="chat">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <span>Her AI</span>
        </button>
        
        <button class="her-nav-item" data-section="imported-chats">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
          </svg>
          <span>Imported Chats</span>
        </button>
        
        <div class="her-nav-section">
          <span class="her-nav-label">Gallery</span>
        </div>
        
        <a href="she/index.html" class="her-nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span>She Gallery</span>
        </a>
        
        <button class="her-nav-item" data-section="photos">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <polyline points="21 15 16 10 5 21"/>
          </svg>
          <span>Photos</span>
        </button>
        
        <button class="her-nav-item" data-section="videos">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="23 7 16 12 23 17 23 7"/>
            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
          </svg>
          <span>Videos</span>
        </button>
        
        <div class="her-nav-section">
          <span class="her-nav-label">Rituals</span>
        </div>
        
        <button class="her-nav-item" data-section="daily">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 20h9"/>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
          </svg>
          <span>Daily Entry</span>
        </button>
        
        <button class="her-nav-item" data-section="mood">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
            <line x1="9" y1="9" x2="9.01" y2="9"/>
            <line x1="15" y1="9" x2="15.01" y2="9"/>
          </svg>
          <span>Mood</span>
        </button>
        
        <button class="her-nav-item" data-section="memories">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span>Memories</span>
        </button>
      </nav>

      <div class="her-sidebar-footer">
        <a href="index.html" class="her-nav-item her-nav-back">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
          <span>Back to Dashboard</span>
        </a>
        
        <button class="her-nav-item her-nav-lock" id="lockBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <span>Lock</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="her-main">
      <!-- Chat Section -->
      <section class="her-section active" id="section-chat">
        <div class="her-chat-layout">
          <!-- Chat Sidebar -->
          <aside class="her-chat-sidebar" id="chatSidebar">
            <div class="her-chat-sidebar-header">
              <span>Conversations</span>
              <button class="her-new-chat-btn" id="newChatBtn" title="New conversation">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
              </button>
            </div>
            <div class="her-chat-sessions" id="chatSessions">
              <!-- Sessions loaded dynamically -->
            </div>
          </aside>
          
          <!-- Chat Main -->
          <div class="her-chat-main">
            <div class="her-chat-header">
              <div class="her-chat-header-info">
                <span class="her-chat-header-icon">üíï</span>
                <div class="her-chat-header-text">
                  <h2>Her AI</h2>
                  <span class="her-chat-status">Online</span>
                </div>
              </div>
              <div class="her-chat-header-actions">
                <button class="her-icon-btn" id="toggleTrainingBtn" title="Training Data">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                  </svg>
                </button>
              </div>
            </div>
            
            <div class="her-chat-messages" id="chatMessages">
              <!-- Messages loaded dynamically -->
              <div class="her-chat-empty">
                <span class="her-chat-empty-icon">üí≠</span>
                <p>Kuch baat karo...</p>
              </div>
            </div>
            
            <div class="her-chat-input-container">
              <div class="her-chat-input-wrapper">
                <textarea class="her-chat-input" id="chatInput" placeholder="Type a message..." rows="1"></textarea>
                <button class="her-send-btn" id="sendBtn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"/>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Imported Chats Section -->
      <section class="her-section" id="section-imported-chats">
        <div class="her-section-header">
          <div class="her-section-title-group">
            <h2 class="her-section-title">Imported Chats</h2>
            <p class="her-section-subtitle">WhatsApp and Instagram conversations for style reference</p>
          </div>
          <div class="her-section-actions">
            <button class="her-btn her-btn-primary" id="importChatBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              Import Chat
            </button>
          </div>
        </div>
        
        <div class="her-workspace">
          <div class="her-imported-chats-section">
            <div class="her-imported-chats-list">
              <div class="her-imported-chats-grid" id="importedChatsGrid">
                <!-- Imported chats loaded dynamically -->
              </div>
              
              <div class="her-empty-state" id="importedChatsEmpty">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                </svg>
                <h3>No imported chats</h3>
                <p>Import WhatsApp or Instagram chats to view them here.<br>These are used for style reference only.</p>
              </div>
            </div>
            
            <div class="her-chat-viewer" id="importedChatViewer" style="display: none;">
              <p class="her-chat-viewer-empty">Select a chat to view</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Photos Section -->
      <section class="her-section" id="section-photos">
        <div class="her-section-header">
          <div class="her-section-title-group">
            <h2 class="her-section-title">Photos</h2>
            <p class="her-section-subtitle">Your special moments</p>
          </div>
          <div class="her-section-actions">
            <input type="file" id="photoUploadInput" accept="image/*" multiple style="display: none;">
            <button class="her-btn her-btn-primary" id="uploadPhotoBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              Upload
            </button>
          </div>
        </div>
        <div class="her-workspace">
          <div class="her-photos-grid" id="photosGrid"></div>
          <div class="her-empty-state" id="photosEmpty">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <polyline points="21 15 16 10 5 21"/>
            </svg>
            <h3>No photos yet</h3>
            <p>Upload your special moments</p>
          </div>
        </div>
      </section>

      <!-- Videos Section -->
      <section class="her-section" id="section-videos">
        <div class="her-section-header">
          <div class="her-section-title-group">
            <h2 class="her-section-title">Videos</h2>
            <p class="her-section-subtitle">Your video memories</p>
          </div>
          <div class="her-section-actions">
            <input type="file" id="videoUploadInput" accept="video/*" multiple style="display: none;">
            <button class="her-btn her-btn-primary" id="uploadVideoBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              Upload
            </button>
          </div>
        </div>
        <div class="her-workspace">
          <div class="her-videos-grid" id="videosGrid"></div>
          <div class="her-empty-state" id="videosEmpty">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <polygon points="23 7 16 12 23 17 23 7"/>
              <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
            </svg>
            <h3>No videos yet</h3>
            <p>Upload your video memories</p>
          </div>
        </div>
      </section>

      <!-- Daily Entry Section -->
      <section class="her-section" id="section-daily">
        <div class="her-section-header">
          <div class="her-section-title-group">
            <h2 class="her-section-title">üìù Today's Entry</h2>
            <p class="her-section-subtitle" id="todayDate"></p>
          </div>
        </div>
        <div class="her-workspace">
          <div class="her-daily-container">
            <div class="her-daily-prompt" id="dailyPrompt">What made you smile today?</div>
            <div class="her-daily-prompts">
              <button class="her-prompt-btn" data-prompt="What made you smile today?">üòä Smile</button>
              <button class="her-prompt-btn" data-prompt="What are you grateful for?">üôè Grateful</button>
              <button class="her-prompt-btn" data-prompt="How do you feel right now?">üí≠ Feelings</button>
              <button class="her-prompt-btn" data-prompt="What did you learn today?">üìö Learning</button>
            </div>
            <textarea id="dailyTextarea" class="her-daily-textarea" placeholder="Start writing..."></textarea>
            <div class="her-daily-actions">
              <span class="her-daily-char-count"><span id="dailyCharCount">0</span> characters</span>
              <button class="her-btn her-btn-primary" id="saveDailyBtn">Save Entry</button>
            </div>
            <div class="her-daily-history">
              <h3>Previous Entries</h3>
              <div id="dailyHistory"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Mood Section -->
      <section class="her-section" id="section-mood">
        <div class="her-section-header">
          <div class="her-section-title-group">
            <h2 class="her-section-title">How are you feeling?</h2>
            <p class="her-section-subtitle" id="moodDate"></p>
          </div>
        </div>
        <div class="her-workspace">
          <div class="her-mood-container">
            <div class="her-mood-current" id="currentMoodDisplay" style="display: none;">
              <span class="her-mood-current-emoji" id="currentMoodEmoji"></span>
              <span class="her-mood-current-label" id="currentMoodLabel"></span>
              <span class="her-mood-current-note" id="currentMoodNote" style="display: none;"></span>
              <button class="her-btn her-btn-secondary" id="changeMoodBtn">Change</button>
            </div>
            <div class="her-mood-selector" id="moodSelector">
              <button class="her-mood-option" data-mood="happy"><span>üòä</span><small>Happy</small></button>
              <button class="her-mood-option" data-mood="loved"><span>ü•∞</span><small>Loved</small></button>
              <button class="her-mood-option" data-mood="calm"><span>üòå</span><small>Calm</small></button>
              <button class="her-mood-option" data-mood="sad"><span>üò¢</span><small>Sad</small></button>
              <button class="her-mood-option" data-mood="tired"><span>üò¥</span><small>Tired</small></button>
              <button class="her-mood-option" data-mood="stressed"><span>üò∞</span><small>Stressed</small></button>
              <button class="her-mood-option" data-mood="angry"><span>üò†</span><small>Angry</small></button>
              <button class="her-mood-option" data-mood="excited"><span>ü§©</span><small>Excited</small></button>
            </div>
            <div class="her-mood-note-group" id="moodNoteGroup">
              <textarea id="moodNote" class="her-mood-note" placeholder="What's on your mind? (optional)"></textarea>
              <button class="her-btn her-btn-primary" id="saveMoodBtn">Save Mood</button>
            </div>
            <div class="her-mood-history" id="moodHistory">
              <h3>Previous Moods</h3>
            </div>
          </div>
        </div>
      </section>

      <!-- Memories Section -->
      <section class="her-section" id="section-memories">
        <div class="her-section-header">
          <div class="her-section-title-group">
            <h2 class="her-section-title">Memories</h2>
            <p class="her-section-subtitle">Save your special moments</p>
          </div>
          <div class="her-section-actions">
            <button class="her-btn her-btn-primary" id="newMemoryBtn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              New Memory
            </button>
          </div>
        </div>
        <div class="her-workspace">
          <div class="her-memory-form" id="memoryForm">
            <input type="text" id="memoryTitle" class="her-memory-input" placeholder="Memory title...">
            <textarea id="memoryContent" class="her-memory-textarea" placeholder="Describe the moment..."></textarea>
            <input type="date" id="memoryDate" class="her-memory-input">
            <select id="memoryMood" class="her-memory-input">
              <option value="">Select mood (optional)</option>
              <option value="happy">üòä Happy</option>
              <option value="loved">ü•∞ Loved</option>
              <option value="calm">üòå Calm</option>
              <option value="sad">üò¢ Sad</option>
              <option value="excited">ü§© Excited</option>
            </select>
            <div class="her-memory-form-actions">
              <button class="her-btn her-btn-secondary" id="cancelMemoryBtn">Cancel</button>
              <button class="her-btn her-btn-primary" id="saveMemoryBtn">Save Memory</button>
            </div>
          </div>
          <div class="her-memories-grid" id="memoriesGrid"></div>
          <div class="her-empty-state" id="memoriesEmpty">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
            <h3>No memories yet</h3>
            <p>Save your special moments here</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Toast Container -->
  <div class="her-toast-container" id="toastContainer"></div>

  <!-- Confirmation Dialog -->
  <div class="her-confirm-overlay" id="confirmOverlay">
    <div class="her-confirm-dialog">
      <span class="her-confirm-icon" id="confirmIcon">üóëÔ∏è</span>
      <h3 class="her-confirm-title" id="confirmTitle">Are you sure?</h3>
      <p class="her-confirm-message" id="confirmMessage">This action cannot be undone.</p>
      <div class="her-confirm-actions">
        <button class="her-btn her-btn-secondary" id="confirmCancel">Cancel</button>
        <button class="her-btn her-btn-danger" id="confirmAction">Delete</button>
      </div>
    </div>
  </div>

  <!-- Modal Overlay -->
  <div class="her-modal-overlay" id="modalOverlay">
    <div class="her-modal" id="modalContent">
      <div class="her-modal-header">
        <h3 id="modalTitle">Modal</h3>
        <button class="her-modal-close" id="modalClose">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="her-modal-body" id="modalBody">
        <!-- Modal content loaded dynamically -->
      </div>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="her-mobile-nav" id="mobileNav">
    <button class="her-mobile-nav-item active" data-section="chat">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
      </svg>
      <span>Chat</span>
    </button>
    <button class="her-mobile-nav-item" data-section="photos">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
        <circle cx="8.5" cy="8.5" r="1.5"/>
        <polyline points="21 15 16 10 5 21"/>
      </svg>
      <span>Photos</span>
    </button>
    <button class="her-mobile-nav-item" data-section="daily">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 20h9"/>
        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
      </svg>
      <span>Daily</span>
    </button>
    <button class="her-mobile-nav-item" data-section="memories">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
      <span>Memories</span>
    </button>
  </nav>

  <!-- Lightbox -->
  <div class="her-lightbox" id="lightbox">
    <button class="her-lightbox-close" id="lightboxClose">√ó</button>
    <button class="her-lightbox-nav her-lightbox-prev" id="lightboxPrev">‚Äπ</button>
    <button class="her-lightbox-nav her-lightbox-next" id="lightboxNext">‚Ä∫</button>
    <img id="lightboxImage" src="" alt="">
  </div>

  <!-- Video Player -->
  <div class="her-video-player" id="videoPlayer">
    <button class="her-lightbox-close" id="videoPlayerClose">√ó</button>
    <video id="videoPlayerVideo" controls></video>
  </div>

  <script src="js/database.js"></script>
  <script src="js/ai-system.js"></script>
  <script src="js/personal-app.js"></script>
</body>
</html>